/* Generated by osLET IDE */
/* Project: Untitled Project */

#include "../syscall.h"
#include "../lib/stdio.h"

// Controls for Form1
gui_control_t Form1_controls[] = {
    {CTRL_FRAME, 10, 7, 181, 165, 0, 7, "Non-interactive", 1, 0, 12, 0, 0, NULL, 0, 0, 0},
    {CTRL_LABEL, 17, 34, 0, 0, 0, 15, "Label", 2, 0, 12, 0, 0, NULL, 0, 0, 0},
    {CTRL_LABEL, 18, 60, 0, 0, 0, 14, "Label with decoration", 3, 3, 12, 1, 0, NULL, 0, 0, 0},
    {CTRL_PICTUREBOX, 18, 89, 165, 75, 0, 7, "", 4, 0, 12, 0, 0, NULL, 0, 0, 0},
    {CTRL_FRAME, 197, 7, 181, 165, 0, 7, "Interactive", 9, 0, 12, 0, 0, NULL, 0, 0, 0},
    {CTRL_BUTTON, 209, 28, 70, 23, 0, 7, "Button", 10, 0, 12, 0, 0, NULL, 0, 0, 0},
    {CTRL_BUTTON, 295, 28, 70, 23, 0, 12, "Button", 11, 0, 12, 0, 0, NULL, 0, 0, 0},
    {CTRL_CHECKBOX, 207, 149, 13, 13, 0, 7, "CheckBox", 12, 0, 12, 0, 0, NULL, 0, 0, 0},
    {CTRL_CHECKBOX, 292, 149, 13, 13, 0, 7, "CheckBox", 13, 0, 12, 0, 0, NULL, 0, 0, 0},
    {CTRL_RADIOBUTTON, 208, 124, 12, 12, 0, 7, "Radio", 14, 0, 12, 0, 0, NULL, 0, 0, 0},
    {CTRL_RADIOBUTTON, 293, 124, 12, 12, 0, 7, "Radio", 15, 0, 12, 0, 0, NULL, 0, 0, 0},
    {CTRL_TEXTBOX, 210, 67, 154, 20, 0, 7, "", 16, 0, 12, 0, 0, NULL, 0, 0, 0}
};

void* create_Form1(void) {
    void *form = sys_win_create_form("Control test suite", 126, 135, 392, 201);
    for (int i = 0; i < 12; i++) {
        sys_win_add_control(form, &Form1_controls[i]);
    }
    sys_win_draw(form);
    return form;
}

__attribute__((section(".entry"), used))
void _start(void) {
    int mx = 320;
    int my = 240;
    unsigned char mb;

    sys_gfx_enter();
    sys_gfx_fillrect(0, 0, 640, 480, COLOR_LIGHT_GRAY);

    // Create windows
    void *Form1 = create_Form1();

    int exit_requested = 0;

    while (!exit_requested) {
        sys_get_mouse_state(&mx, &my, &mb);

        // Handle Form1 events
        int event0 = sys_win_pump_events(Form1);
        if (event0 > 0) {
            /* Control clicked in Form1 - event = control ID */
            if (event0 == 10) { /* Button */
                // TODO: Handle Button click
            }
            if (event0 == 11) { /* Button */
                exit_requested = 1;
            }
        } else if (event0 == -2 || event0 == -1) {
            sys_win_redraw_all();
        }

        sys_mouse_draw_cursor(mx, my, 0);
        sys_gfx_swap();
    }

    sys_win_destroy_form(Form1);
    sys_gfx_exit();
    sys_exit();
}
